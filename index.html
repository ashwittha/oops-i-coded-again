<script>
  const wrap = document.getElementById("wrap");
  const tip = document.getElementById("tip");
  const canvas = document.getElementById("art");
  const ctx = canvas.getContext("2d");
  ctx.imageSmoothingEnabled = false;

  const P = 7;

  const COL = {
    pinkOutline: "#e46aa9",
    pinkMain:    "#ff93c7",
    pinkMid:     "#ffb7dd",
    pinkLite:    "#ffd7ee",
    mintMain:    "#c9fbf5",
    mintLite:    "#e6fffc",
    white:       "#ffffff",
    shadow:      "#f4f4f6",
    text:        "#6aa7a1"
  };

  let isHovering = false;
  let typedText = "";
  let typingInterval = null;
  const fullText = "hello world";

  function rect(x, y, w, h, color){
    ctx.fillStyle = color;
    ctx.fillRect(x * P, y * P, w * P, h * P);
  }

  function draw(){
    const W = Math.floor(canvas.width / P);
    const H = Math.floor(canvas.height / P);

    rect(0, 0, W, H, COL.white);

    // ===== MONITOR =====
    rect(10, 6, 60, 34, COL.pinkOutline);
    rect(11, 7, 58, 32, COL.pinkMain);
    rect(12, 8, 56, 30, COL.pinkMid);
    rect(13, 9, 54, 28, COL.pinkLite);

    rect(16,12, 48, 22, COL.pinkMain);  // bezel
    rect(17,13, 46, 20, COL.mintLite);  // screen border

    // SCREEN (glow on hover)
    if (isHovering) {
      rect(18,14, 44, 18, "#eafffd");

      ctx.save();
      ctx.shadowColor = "rgba(180,245,240,0.9)";
      ctx.shadowBlur = 18;
      ctx.fillStyle = "#eafffd";
      ctx.fillRect(18 * P, 14 * P, 44 * P, 18 * P);
      ctx.restore();
    } else {
      rect(18,14, 44, 18, COL.mintMain);
    }

    // Typed text on screen
    ctx.fillStyle = COL.text;
    ctx.font = `${5 * P}px monospace`;
    ctx.textBaseline = "top";
    ctx.fillText(typedText, 20 * P, 20 * P);

    rect(60,13, 3, 3, COL.white);

    // ===== STAND =====
    rect(37,40, 6, 2, COL.pinkOutline);
    rect(38,41, 4, 3, COL.pinkMain);
    rect(36,44, 8, 4, COL.pinkOutline);
    rect(37,45, 6, 4, COL.pinkMid);
    rect(32,50, 16, 2, COL.pinkOutline);
    rect(33,51, 14, 2, COL.pinkMain);
    rect(34,52, 12, 2, COL.pinkMid);
    rect(35,53, 10, 2, COL.pinkLite);

    // ===== KEYBOARD =====
    rect(10,60, 60, 2, COL.shadow);
    rect(10,52, 60, 10, COL.pinkOutline);
    rect(11,53, 58,  8, COL.pinkMain);
    rect(12,54, 56,  6, COL.pinkMid);
    for (let x = 14; x <= 62; x += 6) rect(x,55, 4, 2, COL.pinkLite);
    for (let x = 16; x <= 60; x += 6) rect(x,58, 4, 2, COL.pinkLite);
    rect(26,60, 28, 1, COL.pinkLite);

    // ===== MOUSE =====
    const mouseX = 66, mouseY = 66;
    rect(mouseX,   mouseY,   8, 12, COL.pinkOutline);
    rect(mouseX+1, mouseY+1, 6, 10, COL.pinkMain);
    rect(mouseX+3, mouseY+3, 2,  2, COL.pinkLite);

    // ===== CABLE =====
    const cable = [
      [70,18],[70,19],[70,20],[70,21],[70,22],[70,23],[70,24],
      [71,25],[72,25],[73,25],
      [73,26],[73,27],[73,28],[73,29],[73,30],[73,31],[73,32],[73,33],
      [73,34],[73,35],[73,36],[73,37],[73,38],[73,39],[73,40],[73,41],
      [73,42],[73,43],[73,44],[73,45],[73,46],[73,47],[73,48],[73,49],
      [73,50],[73,51],[73,52],[73,53],[73,54],[73,55],[73,56],[73,57],
      [73,58],[73,59],[73,60],[73,61],[73,62],[73,63],[73,64],
      [72,65],[71,66],[70,66]
    ];

    for (const [x,y] of cable){
      rect(x, y, 1, 1, COL.pinkOutline);
    }
  }

  function startTyping(){
    typedText = "";
    let i = 0;
    typingInterval = setInterval(() => {
      if (i < fullText.length) {
        typedText += fullText[i++];
        draw();
      } else {
        clearInterval(typingInterval);
      }
    }, 120);
  }

  function stopTyping(){
    clearInterval(typingInterval);
    typedText = "";
    draw();
  }

  draw();

  wrap.addEventListener("mouseenter", () => {
    isHovering = true;
    tip.textContent = "✨ hello world ✨";
    startTyping();
  });

  wrap.addEventListener("mouseleave", () => {
    isHovering = false;
    tip.textContent = "✨ hover the screen ✨";
    stopTyping();
  });
</script>
